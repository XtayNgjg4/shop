(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d071c7f"],{a61f:function(t,i,s){},a7df:function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"container"},[s("div",{staticClass:"topbar",staticStyle:{height:"46px"}},[s("div",{staticClass:"topbarView"},[s("van-icon",{attrs:{name:"arrow-left"},on:{click:t.onClickLeft}}),t._l(t.topbarItem,(function(i,e){return s("div",{key:e,class:t.activeFun(i)},[t._v(t._s(i.name))])}))],2)]),s("van-swipe",{attrs:{autoplay:3e3}},t._l(t.images,(function(t,i){return s("van-swipe-item",{key:i},[s("img",{staticClass:"swipePic",attrs:{src:t.img}})])})),1),s("div",{ref:"shopView",staticClass:"shopView"},[s("div",{staticClass:"detailCon"},[s("div",{staticClass:"shopTitle"},[t._v(t._s(t.shopName))]),s("div",{staticClass:"shopPriceBox"},[s("div",[t._v(" ￥ "),s("span",{staticClass:"price"},[t._v(t._s(t.shopPrice))])]),s("div")])]),s("div",{staticClass:"shopSelect"},[s("van-cell",{attrs:{title:"优惠券","is-link":""}}),s("van-cell",{attrs:{title:"规格","is-link":""},on:{click:function(i){t.show=!0}}})],1)]),s("div",{ref:"shopCon",staticClass:"shopCon"},[s("img",{attrs:{src:"//s3.mogucdn.com/mlcdn/c45406/180811_47jbl66876b75385bb6f47ffdbe96_751x819.jpg",alt:""}}),s("img",{attrs:{src:"//s3.mogucdn.com/mlcdn/c45406/180811_47jbl66876b75385bb6f47ffdbe96_751x819.jpg",alt:""}}),s("img",{attrs:{src:"//s3.mogucdn.com/mlcdn/c45406/180811_47jbl66876b75385bb6f47ffdbe96_751x819.jpg",alt:""}}),s("img",{attrs:{src:"//s3.mogucdn.com/mlcdn/c45406/180811_47jbl66876b75385bb6f47ffdbe96_751x819.jpg",alt:""}}),s("img",{attrs:{src:"//s3.mogucdn.com/mlcdn/c45406/180811_47jbl66876b75385bb6f47ffdbe96_751x819.jpg",alt:""}})]),s("div",{ref:"shopCom",staticClass:"shopCom",staticStyle:{height:"200px",background:"#ffffff"}},[t._v("评论")]),s("div",{ref:"shopTj",staticClass:"shopTj",staticStyle:{height:"200px",background:"#ffffff"}},[t._v("推荐")]),s("van-goods-action",{attrs:{"safe-area-inset-bottom":""}},[s("van-goods-action-icon",{attrs:{icon:t.flag?"star":"star-o",text:"收藏"},on:{click:t._addFav}}),s("van-goods-action-icon",{attrs:{icon:"shop-o",text:"购物车"}}),s("van-goods-action-button",{attrs:{color:"#7232dd",type:"warning",text:"加入购物车"},on:{click:t._addCart}}),s("van-goods-action-button",{attrs:{color:"#7232dd",type:"danger",text:"立即购买"}})],1),s("van-action-sheet",{attrs:{title:" "},model:{value:t.show,callback:function(i){t.show=i},expression:"show"}},[s("div",{staticClass:"content"})])],1)},a=[];s("b0c0");function o(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}s("e7e5");var n=s("d399"),c=s("8039"),r={data:function(){return{images:[],shopid:0,show:!1,shopName:"",shopPrice:0,gid:"",topbarItem:[{id:1,name:"主图"},{id:2,name:"详情"},{id:3,name:"评价"},{id:4,name:"推荐"}],current:1,number:0,view:0,detail:0,pl:0,tj:0,flag:!1}},created:function(){this.shopid=this.$route.params.shopid,this._getShopMsg(this.shopid),this._getFavList()},mounted:function(){var t=this;this.$nextTick((function(){window.addEventListener("scroll",t.topTab),t.view=t.$refs.shopView.getBoundingClientRect().top,t.detail=t.$refs.shopCon.getBoundingClientRect().top,t.pl=t.$refs.shopCom.getBoundingClientRect().top,t.tj=t.$refs.shopTj.getBoundingClientRect().top}))},methods:{_addFav:function(){this.flag=!this.flag,this.flag?Object(c["b"])({uid:this.value,goods_id:this.gid,act_type:"addfav"}).then((function(t){n["a"].success("成功加入收藏夹")})):Object(c["b"])({uid:this.value,goods_id:this.gid,act_type:"del_fav"}).then((function(t){n["a"].success("已取消加入收藏夹")}))},_getFavList:function(){var t=this;Object(c["e"])({uid:this.value}).then((function(i){for(var s=0;s<i.data.length;s++)i.data[s].goods_id==t.$route.params.shopid&&(t.flag=!0)}))},activeFun:function(t){if(t.id==this.current)return"active"},topTab:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;t-this.number<0||(t>this.view&&(this.current=1),t>this.detail&&(this.current=2),t>this.pl&&(this.current=3),t>this.tj&&(this.current=4))},_getShopMsg:function(t){var i=this;Object(c["g"])({goods_id:t,uid:"",is_goods_attr:1,is_goods_spec:1,is_service:1,is_details:1,is_specs:1,is_imgs:1,is_team:0}).then((function(t){i.images=t.data.imgs,i.shopName=t.data.name,i.shopPrice=t.data.price,i.gid=t.data.goods_id}))},onClickLeft:function(){this.$router.go(-1)},_addCart:function(){var t,i=this;Object(c["a"])((t={goods_id:this.gid,num:1,uid:5,cart_id:5,total:"",spec:""},o(t,"total",""),o(t,"direct",0),t)).then((function(t){n["a"].success("加入购物车成功"),Object(c["c"])({uid:5}).then((function(t){i.$store.commit("SetCarTotal",t.data.num)})),console.log(t)}))}},computed:{value:function(){return this.$store.state.userId}},destroyed:function(){window.removeEventListener("scroll",this.topTab)}},d=r,l=(s("eb45"),s("2877")),u=Object(l["a"])(d,e,a,!1,null,"095896cb",null);i["default"]=u.exports},b0c0:function(t,i,s){var e=s("83ab"),a=s("9bf2").f,o=Function.prototype,n=o.toString,c=/^\s*function ([^ (]*)/,r="name";e&&!(r in o)&&a(o,r,{configurable:!0,get:function(){try{return n.call(this).match(c)[1]}catch(t){return""}}})},eb45:function(t,i,s){"use strict";var e=s("a61f"),a=s.n(e);a.a}}]);
//# sourceMappingURL=chunk-4d071c7f.a718ef30.js.map